# frozen_string_literal: true
# shareable_constant_value: literal

# Make the gem thing SHUT UP
begin
  Gem::Specification.instance_variable_set(:@all, nil)
rescue StandardError
  nil
end

source "https://rubygems.org"

ruby ">= 3.4.1"

# Adds ActiveModel-like attributes to plain Ruby objects
gem "active_attr"

# Proof-of-work checks to resist spam/abuse
gem "active_hashcash"

# Store Active Storage blobs in the database instead of files
gem "active_storage_db"

# Adds validations for Active Storage attachments
gem "active_storage_validations"

# URI parsing/normalization beyond Ruby's stdlib
gem "addressable"

# AnyCable integration for ActionCable-compatible websockets
gem "anycable-rails", "~> 1.4"

# Argon2 password hashing
gem "argon2"

# Auditing for ActiveRecord changes
gem "audits1984"

# Safer HTML validation/linting for Rails templates
gem "better_html"

# Speeds up boot by caching expensive operations
gem "bootsnap", require: false

# Authorization rules DSL for controllers/models
gem "cancancan"

# Acceptance/integration testing DSL
gem "capybara"

# PNG image generation/manipulation
gem "chunky_png"

# Hierarchical tree structures with ancestry support
gem "closure_tree"

# Bundles CodeMirror editor assets for Rails
gem "codemirror-rails"

# Upload/serve media assets for ComfortableMexicanSofa CMS
gem "comfortable_media_surfer"

# Audited Rails console sessions
gem "console1984"

# Counter cache maintenance for denormalized counts
gem "counter_culture"

# Collection of small Ruby extensions
gem "facets", "~> 3.1", require: false

# Faster string blank?/present? checks
gem "fast_blank"

# Efficient underscore/camelize helpers
gem "fast_underscore"

# ActivityPub federation support for Rails
gem "federails"

# Moderation tools for the Federails stack
gem "federails-moderation"

# C extension for libffi bindings (FFI helper)
gem "fiddle"

# Utility mixins for Ruby core classes
gem "finishing_moves"

# Bit-field boolean flags on models
gem "flag_shih_tzu"

# Human-readable slugging for ActiveRecord models
gem "friendly_id"

# Emoji data and helpers
gem "gemoji"

# Auto-eager loads associations to avoid N+1 queries
gem "goldiloader"

# Local vendored robots.txt parser
gem "google_robotstxt_parser", path: "vendor/gems/google_robotstxt_parser"

# Rails integration helpers for GraphQL APIs
gem "graphql_rails"

# Immutable collection data structures
gem "hamster"

# Lightweight Ruby data structures and utility classes
gem "hashie"

# Vendored fast Redis client using hiredis
gem "hiredis-client", path: "vendor/gems/hiredis-client"

# HTML compression/minification
gem "htmlcompressor"

# Simple HTTP client wrapper
gem "httparty"

# Image transformation pipeline (Vips/MiniMagick)
gem "image_processing"

# Foundation Inky templating for responsive emails
gem "inky-rb", require: "inky"

# Spam protection via hidden CAPTCHA fields
gem "invisible_captcha"

# JSON response builder DSL
gem "jbuilder"

# JSON Web Token encoding/decoding
gem "jwt"

# Locale files for Kaminari pagination
gem "kaminari-i18n"

# Redis-backed typed attributes for ActiveRecord
gem "kredis"

# Application-level encryption for attributes/files
gem "lockbox"

# Fast memoization helper for methods
gem "memo_wise"

# Hash utility helpers
gem "nice_hash"

# XML/HTML parsing with libxml2
gem "nokogiri"

# OmniAuth strategy for OpenID Connect
gem "omniauth_openid_connect"

# Stdlib OpenStruct dependency (explicit pin)
gem "ostruct"

# WebSocket per-message deflate extension
gem "permessage_deflate"

# Batch pluck helper to fetch columns efficiently
gem "pluck_in_batches"

# Inline CSS and rewrite links for email delivery
gem "premailer-rails"

# Rails asset pipeline successor
gem "propshaft"

# Rack web server
gem "puma"

# Rack middleware for rate limiting/abuse blocking
gem "rack-attack", ">= 6.8.0"

# Rack middleware adding Brotli compression
gem "rack-brotli"

# Rack middleware for configuring CORS headers
gem "rack-cors"

# Request profiling UI for dev/production safelists
gem "rack-mini-profiler"

# Rails framework
gem "rails"

# Controller test helpers (assigns/render_template)
gem "rails-controller-testing"

# Generates Link: preload headers for assets
gem "rails_http_preload"

# I18n locale data and helpers for Rails
gem "rails-i18n"

# Fast regex engine binding to Google RE2
gem "re2"

# Better ERB renderer
gem "reactionview", ">= 0.1.3"

# Integrate React/Vite packs with Rails
gem "react_on_rails", "16.0.0"

# Redis client
gem "redis"

# Form objects and validation layer
gem "reform"

# Guest account support for Rodauth
gem "rodauth-guest"

# I18n translations for Rodauth
gem "rodauth-i18n"

# ActiveRecord integration for Rodauth
gem "rodauth-model"

# OAuth 2 provider support for Rodauth
gem "rodauth-oauth"

# OmniAuth integration for Rodauth
gem "rodauth-omniauth"

# Pwned password checks for Rodauth
gem "rodauth-pwned"

# Rails glue for Rodauth authentication
gem "rodauth-rails"

# Role management for users and resources
gem "rolify"

# Testing framework
gem "rspec"

# Backports future Ruby features
gem "ruby-next"

# ZIP archive read/write support
gem "rubyzip"

# AR second-level cache (vendored)
gem "second_level_cache", "~> 2.7", path: "vendor/gems/second_level_cache"

# Security-related HTTP headers configuration
gem "secure_headers"

# Browser automation driver for tests
gem "selenium-webdriver"

# Rails integration for Sentry error reporting
gem "sentry-rails"

# Core Sentry client
gem "sentry-ruby"

# Share ActiveRecord connection with Sequel
gem "sequel-activerecord_connection"

# Webpack(er) successor for asset bundling
gem "shakapacker", "8.4.0"

# Background job processing with Redis
gem "sidekiq"

# Cron-like recurring jobs for Sidekiq
gem "sidekiq-cron"

# Process large datasets in batches with Sidekiq
gem "sidekiq-iteration"

# Recycle Sidekiq workers to control memory bloat
gem "sidekiq-worker-killer"

# Sitemap XML generation
gem "sitemap_generator"

# Slim template engine
gem "slim"

# Slim integration for Rails views
gem "slim-rails"

# Vendored smart asset pipeline helpers
gem "smart_assets", path: "vendor/gems/smart_assets"

# Stimulus JS integration for Rails
gem "stimulus-rails"

# Real-time Reflex actions over websockets
gem "stimulus_reflex", "3.5.3"

# Filesystem metadata access
gem "sys-filesystem"

# CLI toolkit for scripts/tasks
gem "thor", ">= 1.4.0"

# Forum/message board engine
gem "thredded", "~> 1.2"

# Thredded plugin for Markdown highlighting via CodeRay
gem "thredded-markdown_coderay"

# Thredded plugin for Markdown math via KaTeX
gem "thredded-markdown_katex"

# Unicode locale data and formatting helpers (CLDR)
gem "twitter_cldr"

# Generic interface to template engines
gem "tilt"

# Online schema migrations for large MySQL tables
gem "lhm-shopify"

# High-level Rails architecture (operations/activities)
gem "trailblazer"

# Utility helpers grab-bag
gem "trick_bag"

# MySQL/MariaDB driver used by Rails
gem "trilogy"

# Turbo-powered view helpers/extensions
gem "turbo_power"

# Hotwire Turbo integration for Rails
gem "turbo-rails"

# Timezone data for Windows/portable installs
gem "tzinfo-data"

# Unicode string helpers and data
gem "unicode"

# Transliteration of Unicode to ASCII
gem "unidecoder"

# Component-based server-rendered views
gem "view_component"

# Vite.js integration for Rails asset building
gem "vite_rails"

# Bot/user-agent detection middleware
gem "voight_kampff"

# Recycle web workers to cap memory usage
gem "worker_killer"

# ZIP archive utilities
gem "zip_kit"

# Explicit OpenSSL version pin - fixes some compilation issues sometimes
gem "openssl", "~> 3.3.1", require: false

# Shim for Ractor compatibility on truffleruby
gem "ractor-shim", require: false

group :development, :test do
  # Checks AR schema for anti-patterns
  gem "active_record_doctor"

  # Adds schema comments to models/tests
  gem "annotaterb"

  # File watcher for reloading
  gem "listen"
end

group :development do
  # Static analysis for Rails security issues
  gem "brakeman", require: false

  # Detects mismatches between DB and models
  gem "database_consistency", require: false

  # Formats ERB templates
  gem "erb-formatter", require: false

  # Lints ERB templates
  gem "erb_lint", require: false

  # Suggests faster Ruby alternatives
  gem "fasterer", require: false
  # Dependency required by fasterer on Ruby 3.4
  gem "ruby_parser", require: false

  # Manage/check translation keys
  gem "i18n-tasks", require: false

  # Index recommendations for DB columns
  gem "lol_dba", require: false

  # Ruby style and linting
  gem "rubocop", require: false

  # Performance cops for RuboCop
  gem "rubocop-performance", require: false

  # Rails-specific RuboCop cops
  gem "rubocop-rails", require: false

  # RuboCop runner for ERB
  gem "ruumba", require: false

  # Linter for Slim templates
  gem "slim_lint", require: false
end

group :test do
  # Mocking/stubbing library for tests
  gem "mocha"

  # MySQL client for test DB
  gem "mysql2"
end

if RUBY_ENGINE != "truffleruby"
  # Sorbet runtime type checks
  gem "sorbet-runtime"

  # Sorbet type checker CLI
  gem "sorbet", "~> 0.5"

  # RBI generator for Sorbet
  gem "tapioca", "~> 0.17", require: false

  # Sorbet tooling helpers (vendored)
  gem "spoom", path: "vendor/gems/spoom", require: false
end
