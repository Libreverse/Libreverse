%nav{id: "sidebar-nav-#{sidebar_id}",
     class: ["sidebar", ("sidebar-hovered" if hover_enabled == 't')].compact.join(" "),
     role: "navigation",
     aria: {expanded: (hover_enabled == 't' ? 'true' : 'false'), label: "Navigation Sidebar"},
     data: {controller: "sidebar",
            action: "mouseenter->sidebar#toggleHover mouseleave->sidebar#toggleHover",
            expanded: (hover_enabled == 't' ? 'true' : 'false'),
            "hover-enabled": (hover_enabled == 't' ? 'true' : 'false'),
            "reflex-root": "#sidebar-nav-#{sidebar_id}",
            "sidebar-id": sidebar_id}}
  .sidebar-contents{data: {"reflex-permanent": ""}}
    - current_path = request.path
    %a{href: "/",
       class: ["sidebar-link", ("sidebar-default-cursor" if current_path == '/')].compact.join(" "),
       aria: {label: "Go to homepage"},
       data: {controller: "link",
              action: "click->link#click",
              link_is_current_value: (current_path == '/').to_s}}
      = sidebar_icon(svg_icon_data_url("libreverse-logo"), (current_path == "/" ? "sidebar-current" : ""))
    %a{href: "/search",
       class: ["sidebar-link", ("sidebar-default-cursor" if current_path == '/search')].compact.join(" "),
       aria: {label: "Go to search page"},
       data: {controller: "link",
              action: "click->link#click",
              link_is_current_value: (current_path == '/search').to_s}}
      = sidebar_icon(svg_icon_data_url("search"), (current_path == "/search" ? "sidebar-current" : ""))
    / Authentication links
    - if rodauth.logged_in? && !rodauth.guest_logged_in?
      %a{href: dashboard_path,
         class: ["sidebar-link", ("sidebar-default-cursor" if current_path == dashboard_path)].compact.join(" "),
         aria: {label: "Go to dashboard"},
         data: {controller: "link",
                action: "click->link#click",
                link_is_current_value: (current_path == dashboard_path).to_s}}
        = sidebar_icon(svg_icon_data_url("dashboard"), (current_path == dashboard_path ? "sidebar-current" : ""))
      %a{href: experiences_path,
         class: ["sidebar-link", ("sidebar-default-cursor" if current_path == experiences_path)].compact.join(" "),
         aria: {label: "Manage experiences"},
         data: {controller: "link",
                action: "click->link#click",
                link_is_current_value: (current_path == experiences_path).to_s}}
        = sidebar_icon(svg_icon_data_url("experiences"), (current_path == experiences_path ? "sidebar-current" : ""))
      = button_to rodauth.logout_path,
                  method: :post,
                  class: "sidebar-link sidebar-logout-button",
                  aria: { label: "Sign out" } do
        = sidebar_icon(svg_icon_data_url("logout"))
    - else
      %a{href: rodauth.login_path,
         class: ["sidebar-link", ("sidebar-default-cursor" if current_path == rodauth.login_path)].compact.join(" "),
         aria: {label: "Sign in"},
         data: {controller: "link",
                action: "click->link#click",
                link_is_current_value: (current_path == rodauth.login_path).to_s}}
        = sidebar_icon(svg_icon_data_url("login"), (current_path == rodauth.login_path ? "sidebar-current" : ""))
      %a{href: rodauth.create_account_path,
         class: ["sidebar-link", ("sidebar-default-cursor" if current_path == rodauth.create_account_path)].compact.join(" "),
         aria: {label: "Sign up"},
         data: {controller: "link",
                action: "click->link#click",
                link_is_current_value: (current_path == rodauth.create_account_path).to_s}}
        = sidebar_icon(svg_icon_data_url("signup"), (current_path == rodauth.create_account_path ? "sidebar-current" : ""))
