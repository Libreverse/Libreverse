/# Shared assets partial for app and CMS
- if Rails.env.test?
  / Skip Vite asset tags entirely in test to avoid build/manifest overhead for backend-focused tests.
  / (application.js bundle not required for controller/streaming specs.)
- else
  = vite_client_tag data: { turbo_track: "reload" }
  - if Rails.env.production?
    / In production, always link assets; optionally inline for first-time/external, non-Turbo requests.
    = vite_stylesheet_links_for_entry "~/javascript/application.js", data: { turbo_track: "reload" }
    - if should_inline_assets?
      / For external referrers and full document loads, inline to avoid pop-in and extra RTTs
      = vite_modulepreload_link "~/javascript/application.js"
      = inline_vite_stylesheet "~/javascript/application.js"
      = inline_vite_javascript "~/javascript/application.js"
    - else
      = vite_javascript_tag "~/javascript/application.js", data: { turbo_track: "reload" }
  - else
    / Development: load only the JS entry; it imports application.scss (no separate stylesheet tag needed)
    = vite_javascript_tag "~/javascript/application.js", data: { turbo_track: "reload" }
    - if Rails.env.development?
      = render "layouts/development_headers"
