/ Link to the adguard extra script first in order to override other scripts if needed
= javascript_include_tag "/proxy/userscripts/adguard-extra.js", data: {turbo_track: "reload"}
/ In dev we want the stylesheets to come from vite for HMR. In prod we want then inlined to avoid FOUC
- if Rails.env.production?
  = inline_vite_stylesheet "~/javascript/application.js"
- else
  = vite_stylesheet_tag "~/stylesheets/application.scss", data: {turbo_track: "reload"}
/ Vite client for HMR
= vite_client_tag data: {turbo_track: "reload"}
/ Load the main javascript bundle
= vite_javascript_tag "~/javascript/application.js", data: {turbo_track: "reload"}
/ Load supplemental javascript assets
- asset_data = generate_inline_asset_importmap
script type="importmap"
  | #{ { imports: asset_data[:imports] }.to_json.html_safe }
script type="module"
  | window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = { isDisabled: true };
  | #{asset_data[:statements].map { |key| %(import "#{key}";) }.join("\n  ")}
/ Load in react-rails bit for some of the 3D code
= javascript_pack_tag 'generated/MetaversePreview', data: {turbo_track: "reload"}
= stylesheet_pack_tag
