<% include_stylesheet "sidebar" %>
<aside class="sidebar-container" role="complementary">
  <nav
    class="sidebar"
    data-controller="sidebar"
    data-action="mouseenter->sidebar#hover mouseleave->sidebar#unhover"
    data-sidebar-id="main"
    data-hover="false"
    role="navigation"
    aria-label="Navigation Sidebar"
  >
    <div class="sidebar-contents">
      <a
        href="/"
        data-controller="current"
        data-action="click->current#handleClick"
        data-current-target="link"
        class="sidebar-link"
        aria-label="Go to homepage"
      >
        <%= sidebar_icon("~/images/libreverse-logo.svg") %>
      </a>
      <a
        href="/search"
        data-controller="current"
        data-action="click->current#handleClick"
        data-current-target="link"
        class="sidebar-link"
        aria-label="Go to search page"
      >
        <%= sidebar_icon("~/icons/search.svg") %>
      </a>
      <!-- Authentication links -->
      <% if rodauth.logged_in? %>
        <a
          href="<%= dashboard_path %>"
          data-controller="current"
          data-action="click->current#handleClick"
          data-current-target="link"
          class="sidebar-link"
          aria-label="Go to dashboard"
        >
          <%= sidebar_icon("~/icons/dashboard.svg") %>
        </a>
        <a
          href="<%= experiences_path %>"
          data-controller="current"
          data-action="click->current#handleClick"
          data-current-target="link"
          class="sidebar-link"
          aria-label="Manage experiences"
        >
          <%= sidebar_icon("~/icons/experiences.svg") %>
        </a>
        <%= button_to rodauth.logout_path,
            method: :post,
            class: "sidebar-link sidebar-logout-button",
            aria: { label: "Sign out" } do %>
          <%= sidebar_icon("~/icons/logout.svg") %>
        <% end %>
      <% else %>
        <a
          href="<%= rodauth.login_path %>"
          data-controller="current"
          data-action="click->current#handleClick"
          data-current-target="link"
          class="sidebar-link"
          aria-label="Sign in"
        >
          <%= sidebar_icon("~/icons/login.svg") %>
        </a>
        <a
          href="<%= rodauth.create_account_path %>"
          data-controller="current"
          data-action="click->current#handleClick"
          data-current-target="link"
          class="sidebar-link"
          aria-label="Sign up"
        >
          <%= sidebar_icon("~/icons/signup.svg") %>
        </a>
      <% end %>
    </div>
  </nav>
</aside>
