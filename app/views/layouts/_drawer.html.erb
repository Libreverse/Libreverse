<% include_stylesheet "drawer" %>
<%# Set use-force-update to true if the regular toggling isn't working %>
<aside class="drawer-container" role="complementary" data-controller="drawer" data-drawer-use-force-update-value="false">
  <div class="drawer<%= session[:drawer_expanded] ? ' drawer-expanded' : '' %>" aria-labelledby="drawer-title">
    <div class="drawer-header">
      <h2 id="drawer-title" class="drawer-title">
        <% if content_for?(:drawer_title) %>
          <%= yield(:drawer_title) %>
        <% else %>
          Attribution
        <% end %>
      </h2>
      <button
        class="drawer-toggle"
        type="button"
        data-action="drawer#toggle"
        aria-label="Toggle drawer"
      >
        <img
          src="<%= vite_asset_path "~/icons/chevron-up.svg" %>"
          class="drawer-icons<%= session[:drawer_expanded] ? ' rotated' : '' %>"
          loading="eager"
          decoding="async"
          fetchpriority="high"
          draggable="false"
          aria-hidden="true"
          tabindex="-1"
          data-drawer-target="icon"
        >
      </button>
    </div>
    <div class="drawer-contents<%= session[:drawer_expanded] ? ' visible' : '' %>" data-drawer-target="content">
      <div class="drawer-content-container">
        <div class="drawer-content">
          <% if content_for?(:drawer) %>
            <%= yield(:drawer) %>
          <% else %>
            <%= render("layouts/default_drawer_content") %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</aside>
