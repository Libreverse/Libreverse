// Generated by CoffeeScript 2.7.0
var app, is_development, reference;

import { Application } from "@hotwired/stimulus";
import process from "node:process";

import consumer from "../channels/consumer";

import StimulusReflex from "stimulus_reflex";

// Start the Stimulus application
app = Application.start();

// Attach ActionCable consumer so StimulusReflex can share the connection
app.consumer = consumer;
globalThis.App = { cable: consumer };

// Enable StimulusReflex debug when running in development mode
// Use a safe check compatible with CoffeeScript/Node environments
is_development = false;

try {
    if (process != undefined && process.env != undefined) {
        is_development = process.env.NODE_ENV === "development";
    } else {
        // If process isn't available (e.g., in some bundlers), try import.meta if supported
        is_development =
            import.meta == undefined
                ? false
                : ((reference = import.meta.env) == undefined
                      ? void 0
                      : reference.MODE) === "development";
    }
} catch {
    is_development = false;
}

StimulusReflex.debug = is_development ? true : false;

globalThis.Stimulus = app;

export { app as application };
