name: "Security Analysis"
description: "Run security analysis tools"

inputs:
    tool:
        description: "Security tool to run (brakeman)"
        required: true

runs:
    using: "composite"
    steps:
        - name: Update dependencies
          shell: bash
          run: |
              bundle update
              bun update
        - name: Run Brakeman
          if: inputs.tool == 'brakeman'
          shell: bash
          run: RUBYOPT='--yjit --yjit-exec-mem-size=2 --yjit-mem-size=3 --yjit-call-threshold=1 --yjit-cold-threshold=1000000 ' bundle exec brakeman -A --except WeakHash --quiet --no-summary --no-pager
