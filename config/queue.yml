# Solid Queue Configuration
# Configure dispatchers, workers, and schedulers for different environments

development:
  dispatchers:
    - polling_interval: 1
      batch_size: 500
  workers:
    - queues: "*"
      threads: 1
  scheduler:
    recurring_schedule_file: config/recurring.yml

test:
  dispatchers:
    - polling_interval: 1
      batch_size: 500
  workers:
    - queues: "*"
      threads: 1
  scheduler:
    recurring_schedule_file: config/recurring.yml

production:
  dispatchers:
    - polling_interval: 1
      batch_size: 500
  workers:
    - queues: "*"
      # Sizing comes from ThreadBudget.export_env! (SOLID_QUEUE_THREADS_PER_PROCESS)
      threads: <%= Integer(ENV.fetch("SOLID_QUEUE_THREADS_PER_PROCESS", "1")) %>
  # Optional: if running an external supervisor, it can read processes from here
  processes: <%= Integer(ENV.fetch("SOLID_QUEUE_PROCESSES", "1")) %>
  scheduler:
    recurring_schedule_file: config/recurring.yml
