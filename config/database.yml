# SQLite configuration for Libreverse
# Uses the enhanced SQLite adapter for better features
default: &default
    adapter: sqlite3
    pool: 3
    pragmas:
        foreign_keys: 1
        trusted_schema: 0
        journal_mode: wal
        synchronous: FULL
        temp_store: MEMORY
        cache_size: 5000
        busy_timeout: 5000
        auto_vacuum: incremental
        locking_mode: NORMAL

development:
    <<: *default
    database: db/libreverse_development.sqlite3

test:
    <<: *default
    database: db/libreverse_test.sqlite3

production:
    primary:
        <<: *default
        adapter: sqlite3
        database: &production_db "/data/production.sqlite3"
    queue:
        <<: *default
        adapter: sqlite3
        database: *production_db
        migrations_paths: db/queue_migrate
    cache:
        <<: *default
        adapter: sqlite3
        database: *production_db
        migrations_paths: db/cache_migrate
    cable:
        <<: *default
        adapter: sqlite3
        database: *production_db
        migrations_paths: db/cable_migrate
