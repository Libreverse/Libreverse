# typed: true

# DO NOT EDIT MANUALLY
# This is an autogenerated file for types exported from the `db_text_search` gem.
# Please instead update this file by running `bin/tapioca gem db_text_search`.


# DbTextSearch provides a unified interface on top of ActiveRecord for SQLite, MySQL, and PostgreSQL to do:
# * Case-insensitive string-in-set querying, and CI index creation.
# * Basic full-text search for a list of terms, and FTS index creation.
#
# @see DbTextSearch::CaseInsensitive
# @see DbTextSearch::FullText
#
# source://db_text_search//lib/db_text_search/version.rb#3
module DbTextSearch
  class << self
    # Call the appropriate proc based on the adapter name.
    #
    # @api private
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param mysql [Proc]
    # @param postgres [Proc]
    # @param sqlite [Proc]
    # @return the called proc return value.
    #
    # source://db_text_search//lib/db_text_search.rb#23
    def match_adapter(connection, mysql:, postgres:, sqlite:); end

    # Raises an ArgumentError with "Unsupported adapter #{connection.adapter_name}"
    #
    # @api private
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    #
    # source://db_text_search//lib/db_text_search.rb#39
    def unsupported_adapter!(connection); end
  end
end

# Provides case-insensitive string-in-set querying, LIKE querying, and CI index creation.
#
# source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#5
class DbTextSearch::CaseInsensitive
  # @param column [Symbol] name
  # @param scope [ActiveRecord::Relation, Class<ActiveRecord::Base>]
  # @return [CaseInsensitive] a new instance of CaseInsensitive
  #
  # source://db_text_search//lib/db_text_search/case_insensitive.rb#12
  def initialize(scope, column); end

  # @param asc_or_desc [Symbol]
  # @return [Arel::Collectors::SQLString] a string to be used within an `.order()`
  #
  # source://db_text_search//lib/db_text_search/case_insensitive.rb#34
  def column_for_order(asc_or_desc); end

  # @param value_or_values [String, Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive.rb#19
  def in(value_or_values); end

  # @param query [String]
  # @return [ActiveRecord::Relation] the scope of records with matching prefix.
  #
  # source://db_text_search//lib/db_text_search/case_insensitive.rb#27
  def prefix(query); end

  class << self
    # @api private
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param table_name [String, Symbol]
    # @return [Class<AbstractAdapter>]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive.rb#80
    def adapter_class(connection, table_name, column_name); end

    # Adds a case-insensitive column to the given table.
    #
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param options [Hash] passed to ActiveRecord::ConnectionAdapters::SchemaStatements#add_index
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive.rb#44
    def add_ci_text_column(connection, table_name, column_name, options = T.unsafe(nil)); end

    # Add an index for case-insensitive string search.
    #
    # @option options
    # @option options
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param options [Hash]
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive.rb#71
    def add_index(connection, table_name, column_name, options = T.unsafe(nil)); end

    # @api private
    # @note sqlite not supported.
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param table_name [String, Symbol]
    # @return [Boolean]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive.rb#100
    def column_case_sensitive?(connection, table_name, column_name); end
  end
end

# A base class for CaseInsensitiveStringFinder adapters.
#
# @abstract
# @api private
#
# source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#9
class DbTextSearch::CaseInsensitive::AbstractAdapter
  include ::DbTextSearch::QueryBuilding
  extend ::DbTextSearch::QueryBuilding::ClassMethods

  # @api private
  # @param column [Symbol] name
  # @param scope [ActiveRecord::Relation, Class<ActiveRecord::Base>]
  # @return [AbstractAdapter] a new instance of AbstractAdapter
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#14
  def initialize(scope, column); end

  # @abstract
  # @api private
  # @param asc_or_desc [Symbol]
  # @return [Arel::Collectors::SQLString]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#36
  def column_for_order(asc_or_desc); end

  # @abstract
  # @api private
  # @param values [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#22
  def in(values); end

  # @abstract
  # @api private
  # @param query [String]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#29
  def prefix(query); end

  class << self
    # Add an index for case-insensitive string search.
    #
    # @abstract
    # @api private
    # @option options
    # @option options
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param options [Hash] passed down to ActiveRecord::ConnectionAdapters::SchemaStatements#add_index.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive/abstract_adapter.rb#49
    def add_index(connection, table_name, column_name, options = T.unsafe(nil)); end
  end
end

# Provides case-insensitive string-in-set querying via COLLATE NOCASE.
#
# @api private
#
# source://db_text_search//lib/db_text_search/case_insensitive/collate_nocase_adapter.rb#8
class DbTextSearch::CaseInsensitive::CollateNocaseAdapter < ::DbTextSearch::CaseInsensitive::AbstractAdapter
  # @abstract
  # @api private
  # @param asc_or_desc [Symbol]
  # @return [Arel::Collectors::SQLString]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/collate_nocase_adapter.rb#26
  def column_for_order(asc_or_desc); end

  # @abstract
  # @api private
  # @param values [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/collate_nocase_adapter.rb#10
  def in(values); end

  # @abstract
  # @api private
  # @param query [String]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/collate_nocase_adapter.rb#16
  def prefix(query); end

  class << self
    # Add an index for case-insensitive string search.
    #
    # @abstract
    # @api private
    # @option options
    # @option options
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param options [Hash] passed down to ActiveRecord::ConnectionAdapters::SchemaStatements#add_index.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive/collate_nocase_adapter.rb#31
    def add_index(connection, table_name, column_name, options = T.unsafe(nil)); end
  end
end

# Provides case-insensitive string-in-set querying for case-insensitive columns.
#
# @api private
#
# source://db_text_search//lib/db_text_search/case_insensitive/insensitive_column_adapter.rb#8
class DbTextSearch::CaseInsensitive::InsensitiveColumnAdapter < ::DbTextSearch::CaseInsensitive::AbstractAdapter
  # @abstract
  # @api private
  # @param asc_or_desc [Symbol]
  # @return [Arel::Collectors::SQLString]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/insensitive_column_adapter.rb#20
  def column_for_order(asc_or_desc); end

  # @abstract
  # @api private
  # @param values [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/insensitive_column_adapter.rb#10
  def in(values); end

  # @abstract
  # @api private
  # @param query [String]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/insensitive_column_adapter.rb#15
  def prefix(query); end

  class << self
    # Add an index for case-insensitive string search.
    #
    # @abstract
    # @api private
    # @option options
    # @option options
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param options [Hash] passed down to ActiveRecord::ConnectionAdapters::SchemaStatements#add_index.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive/insensitive_column_adapter.rb#25
    def add_index(connection, table_name, column_name, options = T.unsafe(nil)); end
  end
end

# Provides case-insensitive string-in-set querying by applying the database LOWER function.
#
# @api private
#
# source://db_text_search//lib/db_text_search/case_insensitive/lower_adapter.rb#8
class DbTextSearch::CaseInsensitive::LowerAdapter < ::DbTextSearch::CaseInsensitive::AbstractAdapter
  # @abstract
  # @api private
  # @param asc_or_desc [Symbol]
  # @return [Arel::Collectors::SQLString]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/lower_adapter.rb#21
  def column_for_order(asc_or_desc); end

  # @abstract
  # @api private
  # @param values [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/lower_adapter.rb#10
  def in(values); end

  # @abstract
  # @api private
  # @param query [String]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/case_insensitive/lower_adapter.rb#16
  def prefix(query); end

  class << self
    # Add an index for case-insensitive string search.
    #
    # @abstract
    # @api private
    # @option options
    # @option options
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param options [Hash] passed down to ActiveRecord::ConnectionAdapters::SchemaStatements#add_index.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/case_insensitive/lower_adapter.rb#26
    def add_index(connection, table_name, column_name, options = T.unsafe(nil)); end
  end
end

# Provides basic full-text search for a list of terms, and FTS index creation.
#
# source://db_text_search//lib/db_text_search/full_text/abstract_adapter.rb#4
class DbTextSearch::FullText
  # @param column [Symbol] name
  # @param scope [ActiveRecord::Relation, Class<ActiveRecord::Base>]
  # @return [FullText] a new instance of FullText
  #
  # source://db_text_search//lib/db_text_search/full_text.rb#15
  def initialize(scope, column); end

  # @param pg_ts_config [String] for Postgres, the TS config to use; ignored for non-postgres.
  # @param term_or_terms [String, Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/full_text.rb#23
  def search(term_or_terms, pg_ts_config: T.unsafe(nil)); end

  class << self
    # @api private
    # @param _column_name [String, Symbol]
    # @param _table_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @return [Class<AbstractAdapter>]
    #
    # source://db_text_search//lib/db_text_search/full_text.rb#47
    def adapter_class(connection, _table_name, _column_name); end

    # Add an index for full text search.
    #
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param name [String, Symbol] index name
    # @param pg_ts_config [String] for Postgres, the TS config to use; ignored for non-postgres.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/full_text.rb#36
    def add_index(connection, table_name, column_name, name: T.unsafe(nil), pg_ts_config: T.unsafe(nil)); end
  end
end

# A base class for FullText adapters.
#
# @abstract
# @api private
#
# source://db_text_search//lib/db_text_search/full_text/abstract_adapter.rb#8
class DbTextSearch::FullText::AbstractAdapter
  include ::DbTextSearch::QueryBuilding
  extend ::DbTextSearch::QueryBuilding::ClassMethods

  # @api private
  # @param column [Symbol] name
  # @param scope [ActiveRecord::Relation, Class<ActiveRecord::Base>]
  # @return [AbstractAdapter] a new instance of AbstractAdapter
  #
  # source://db_text_search//lib/db_text_search/full_text/abstract_adapter.rb#13
  def initialize(scope, column); end

  # @abstract
  # @api private
  # @param pg_ts_config [String] a pg text search config
  # @param terms [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/full_text/abstract_adapter.rb#22
  def search(terms, pg_ts_config:); end

  class << self
    # Add an index for full text search.
    #
    # @abstract
    # @api private
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param name [String, Symbol] index name
    # @param pg_ts_config [String] for Postgres, the TS config to use; ignored for non-postgres.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/full_text/abstract_adapter.rb#34
    def add_index(connection, table_name, column_name, name:, pg_ts_config:); end
  end
end

# The default Postgres text search config.
#
# source://db_text_search//lib/db_text_search/full_text.rb#11
DbTextSearch::FullText::DEFAULT_PG_TS_CONFIG = T.let(T.unsafe(nil), String)

# Provides basic FTS support for MySQL.
#
# Runs a `MATCH AGAINST` query against a `FULLTEXT` index.
#
# @api private
# @note MySQL v5.6.4+ is required.
#
# source://db_text_search//lib/db_text_search/full_text/mysql_adapter.rb#12
class DbTextSearch::FullText::MysqlAdapter < ::DbTextSearch::FullText::AbstractAdapter
  # @abstract
  # @api private
  # @param pg_ts_config [String] a pg text search config
  # @param terms [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/full_text/mysql_adapter.rb#14
  def search(terms, pg_ts_config:); end

  class << self
    # Add an index for full text search.
    #
    # @abstract
    # @api private
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param name [String, Symbol] index name
    # @param pg_ts_config [String] for Postgres, the TS config to use; ignored for non-postgres.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/full_text/mysql_adapter.rb#19
    def add_index(connection, table_name, column_name, name:, pg_ts_config:); end
  end
end

# Provides basic FTS support for PostgreSQL.
#
# Runs a `@@ plainto_tsquery` query against a `gist(to_tsvector(...))` index.
#
# @api private
# @see DbTextSearch::FullText::DEFAULT_PG_TS_CONFIG
#
# source://db_text_search//lib/db_text_search/full_text/postgres_adapter.rb#12
class DbTextSearch::FullText::PostgresAdapter < ::DbTextSearch::FullText::AbstractAdapter
  # @abstract
  # @api private
  # @param pg_ts_config [String] a pg text search config
  # @param terms [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/full_text/postgres_adapter.rb#14
  def search(terms, pg_ts_config:); end

  class << self
    # Add an index for full text search.
    #
    # @abstract
    # @api private
    # @param column_name [String, Symbol]
    # @param connection [ActiveRecord::ConnectionAdapters::AbstractAdapter]
    # @param name [String, Symbol] index name
    # @param pg_ts_config [String] for Postgres, the TS config to use; ignored for non-postgres.
    # @param table_name [String, Symbol]
    #
    # source://db_text_search//lib/db_text_search/full_text/postgres_adapter.rb#20
    def add_index(connection, table_name, column_name, name:, pg_ts_config:); end
  end
end

# Provides very basic FTS support for SQLite.
#
# Runs a `LIKE %term%` query for each term, joined with `AND`.
# Cannot use an index.
#
# @api private
# @note .add_index is a no-op.
#
# source://db_text_search//lib/db_text_search/full_text/sqlite_adapter.rb#13
class DbTextSearch::FullText::SqliteAdapter < ::DbTextSearch::FullText::AbstractAdapter
  # @abstract
  # @api private
  # @param pg_ts_config [String] a pg text search config
  # @param terms [Array<String>]
  # @return [ActiveRecord::Relation]
  #
  # source://db_text_search//lib/db_text_search/full_text/sqlite_adapter.rb#15
  def search(terms, pg_ts_config:); end

  class << self
    # A no-op, as we just use LIKE for sqlite.
    #
    # @api private
    #
    # source://db_text_search//lib/db_text_search/full_text/sqlite_adapter.rb#23
    def add_index(_connection, _table_name, _column_name, name:, pg_ts_config:); end
  end
end

# Common methods for building SQL that use @scope and @column instance variables.
#
# @api private
#
# source://db_text_search//lib/db_text_search/query_building.rb#6
module DbTextSearch::QueryBuilding
  mixes_in_class_methods ::DbTextSearch::QueryBuilding::ClassMethods

  # @api private
  # @return [String] SQL-quoted string suitable for use in a LIKE statement, with % and _ escaped.
  #
  # source://db_text_search//lib/db_text_search/query_building.rb#12
  def sanitize_sql_like(string, escape_character = T.unsafe(nil)); end

  protected

  # @api private
  # @return [String] SQL-quoted column (without the table name).
  #
  # source://db_text_search//lib/db_text_search/query_building.rb#25
  def quoted_column; end

  # @api private
  # @return [String] SQL-quoted column fully-qualified with the scope table name.
  #
  # source://db_text_search//lib/db_text_search/query_building.rb#30
  def quoted_scope_column; end

  # @api private
  # @return [String] SQL-quoted scope table name.
  #
  # source://db_text_search//lib/db_text_search/query_building.rb#20
  def quoted_scope_table; end

  class << self
    # @api private
    #
    # source://db_text_search//lib/db_text_search/query_building.rb#7
    def included(base); end
  end
end

# Common methods for building SQL
#
# @api private
#
# source://db_text_search//lib/db_text_search/query_building.rb#36
module DbTextSearch::QueryBuilding::ClassMethods
  protected

  # @api private
  # @return [String] a CREATE INDEX statement
  #
  # source://db_text_search//lib/db_text_search/query_building.rb#40
  def quoted_create_index(connection, table_name, name:, expression:, unique: T.unsafe(nil)); end
end

# Gem version
#
# source://db_text_search//lib/db_text_search/version.rb#5
DbTextSearch::VERSION = T.let(T.unsafe(nil), String)
