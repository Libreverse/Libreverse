# Libreverse supplemental Nginx configuration (loaded after base nginx.conf)
# Keep this minimal to avoid duplicate directives with the upstream image.

# Increase client body size for large uploads
client_max_body_size 2g;

# Unique log format to avoid conflicting with any existing 'main'
log_format libreverse_main '$remote_addr - $remote_user [$time_local] "$request" '
                           '$status $body_bytes_sent "$http_referer" '
                           '"$http_user_agent" "$request_time"';
access_log /var/log/nginx/access.log libreverse_main buffer=16k;

# (Dynamic passenger_pre_start is injected at runtime by entrypoint script; omit static directive here)

# Load Passenger supplemental config if present
include /etc/nginx/passenger.conf;

# CrowdSec initialization handled by bundled crowdsec_nginx.conf (avoid redefining here)

# Site configs are already included by the base nginx.conf; do not include again here.
