module.exports = {
    env: {
        browser: true,
        es2021: true,
        node: true,
    },
    extends: ["eslint:recommended", "plugin:unicorn/recommended"],
    plugins: ["jest", "unicorn", "coffee"],
    parserOptions: {
        ecmaVersion: 2021,
        sourceType: "module",
    },
    ignorePatterns: [
        "app/builds/**",
        "**/node_modules/",
        "**/vendor/",
        "**/tmp/",
        "**.config.js",
        "public/**",
        "app/libs/**",
        "coverage/**",
        "**/gems/**",
        "**/haml_lint*/**",
        "**/openid_connect*/**",
        ".codeql/**",
        "**/iodine*/**",
        "log/**",
        "storage/**",
    ],
    rules: {
        "unicorn/filename-case": "off",
        "unicorn/no-anonymous-default-export": "off",
        "unicorn/no-empty-file": "off",
    },
    overrides: [
        // CoffeeScript configuration
        {
            files: ["**/*.coffee"],
            parser: "eslint-plugin-coffee",
            plugins: ["coffee"],
            env: {
                browser: true,
                node: true,
            },
            parserOptions: {
                ecmaVersion: 2021,
                sourceType: "module",
            },
            rules: {
                // **CoffeeScript-Specific Rules (from original config)**
                "coffee/spread-direction": ["error", "postfix"],
                "coffee/no-backticks": "off", // Matches CoffeeLint "ignore"
                "coffee/shorthand-this": ["error", "always"], // Enforces @ over this, aligns with no_this
                "coffee/implicit-object": "off", // Matches no_implicit_braces "ignore"
                "coffee/implicit-call": "off", // Matches no_implicit_parens "ignore"
                "coffee/no-private-function-fat-arrows": "error",
                "coffee/no-unnecessary-double-quotes": "off", // Matches CoffeeLint "ignore"
                "coffee/boolean-keywords": [
                    "error",
                    { allow: ["yes", "no", "on", "off"] },
                ],

                // **Rules Migrated from CoffeeLint**
                "coffee/arrow-spacing": "error",
                "coffee/object-curly-spacing": ["error", "always"], // Approximates braces_spacing
                "coffee/array-bracket-spacing": ["error", "never"], // Matches bracket_spacing
                "coffee/camelcase": "error",
                "coffee/capitalized-class-names": "error", // Matches camel_case_classes
                "key-spacing": [
                    "error",
                    { beforeColon: false, afterColon: true },
                ], // Matches colon_assignment_spacing
                "coffee/complexity": ["error", 20], // Matches cyclomatic_complexity
                "no-dupe-keys": "error", // Matches duplicate_key
                "new-parens": "error", // Matches empty_constructor_needs_parens
                "coffee/postfix-comprehension-assign-parens": "error", // Matches ensure_comprehensions
                "eol-last": "error",
                "linebreak-style": ["error", "unix"], // Matches line_endings
                "coffee/max-len": "off", // Matches CoffeeLint "ignore"
                "coffee/no-invalid-this": "error", // Matches missing_fat_arrows and prefer_fat_arrows_in_methods
                radix: "error", // Matches missing_parseint_radix
                "no-debugger": "error",
                "coffee/no-empty-function": "error",
                "coffee/empty-func-parens": "error", // Matches no_empty_param_list
                "coffee/no-template-curly-in-string": "error", // Matches no_interpolation_in_single_quotes
                "coffee/no-nested-interpolation": "error",
                "no-plusplus": "error",
                "coffee/english-operators": ["error", "always"], // Matches prefer_english_operator
                "coffee/space-infix-ops": "error", // Part of space_operators
                "coffee/space-unary-ops": "error", // Part of space_operators
                "coffee/keyword-spacing": "error",
                "coffee/spaced-comment": "error",
                "comma-spacing": ["error", { before: false, after: true }], // Matches spacing_after_comma
                "no-tabs": "error",
                "no-trailing-spaces": "error", // Matches no_trailing_whitespace
                "no-throw-literal": "error", // Matches no_throwing_strings
                "coffee/no-unnecessary-fat-arrow": "off", // Matches CoffeeLint "ignore"
                "coffee/object-shorthand": "error",

                // **Unicorn Overrides (from original config)**
                "unicorn/prefer-module": "off",
                "unicorn/no-array-callback-reference": "off",
                "unicorn/no-null": "off",
                "unicorn/prefer-ternary": "off",
                "unicorn/prefer-logical-operator-over-ternary": "off",
                "unicorn/consistent-function-scoping": "off",

                // Unicorn rules that commonly conflict with CoffeeScript transformations
                "unicorn/prefer-spread": "off",
                "unicorn/prefer-includes": "off",
                "unicorn/prefer-string-slice": "off",
                "unicorn/prefer-string-starts-ends-with": "off",
                "unicorn/prefer-array-find": "off",
                "unicorn/prefer-array-some": "off",
                "unicorn/prefer-default-parameters": "off",
                "unicorn/prefer-object-from-entries": "off",
                "unicorn/prefer-optional-catch-binding": "off",
                "unicorn/prefer-regexp-test": "off",
                "unicorn/prefer-set-has": "off",
                "unicorn/prefer-string-replace-all": "off",
                "unicorn/prefer-string-trim-start-end": "off",
                "unicorn/prefer-switch": "off",
                "unicorn/prefer-at": "off",
                "unicorn/prefer-code-point": "off",
                "unicorn/prefer-date-now": "off",
                "unicorn/prefer-math-trunc": "off",
                "unicorn/prefer-modern-dom-apis": "off",
                "unicorn/prefer-modern-math-apis": "off",
                "unicorn/prefer-negative-index": "off",
                "unicorn/prefer-object-has-own": "off",
                "unicorn/prefer-prototype-methods": "off",
                "unicorn/prefer-query-selector": "off",
                "unicorn/prefer-reflect-apply": "off",
                "unicorn/prefer-string-raw": "off",
                "unicorn/prefer-type-error": "off",

                // Additional unicorn rules that may cause fix conflicts
                "unicorn/no-array-for-each": "off",
                "unicorn/no-for-loop": "off",
                "unicorn/no-lonely-if": "off",
                "unicorn/no-negated-condition": "off",
                "unicorn/no-nested-ternary": "off",
                "unicorn/no-new-array": "off",
                "unicorn/no-typeof-undefined": "off",
                "unicorn/no-unnecessary-await": "off",
                "unicorn/no-useless-undefined": "off",
                "unicorn/prefer-add-event-listener": "off",
                "unicorn/prefer-array-flat": "off",
                "unicorn/prefer-array-flat-map": "off",
                "unicorn/prefer-array-index-of": "off",
                "unicorn/prefer-native-coercion-functions": "off",
                "unicorn/prefer-node-protocol": "off",
                "unicorn/prefer-top-level-await": "off",
                "unicorn/throw-new-error": "off",

                // Additional potentially conflicting unicorn rules from the full list
                "unicorn/better-regex": "off",
                "unicorn/catch-error-name": "off",
                "unicorn/consistent-destructuring": "off",
                "unicorn/consistent-empty-array-spread": "off",
                "unicorn/consistent-existence-index-check": "off",
                "unicorn/empty-brace-spaces": "off",
                "unicorn/escape-case": "off",
                "unicorn/explicit-length-check": "off",
                "unicorn/new-for-builtins": "off",
                "unicorn/no-await-expression-member": "off",
                "unicorn/no-console-spaces": "off",
                "unicorn/no-hex-escape": "off",
                "unicorn/no-instanceof-builtins": "off",
                "unicorn/no-named-default": "off",
                "unicorn/no-negation-in-equality-check": "off",
                "unicorn/no-new-buffer": "off",
                "unicorn/no-single-promise-in-promise-methods": "off",
                "unicorn/no-static-only-class": "off",
                "unicorn/no-unnecessary-array-flat-depth": "off",
                "unicorn/no-unnecessary-await": "off",
                "unicorn/no-unnecessary-slice-end": "off",
                "unicorn/no-unreadable-array-destructuring": "off",
                "unicorn/no-useless-fallback-in-spread": "off",
                "unicorn/no-useless-length-check": "off",
                "unicorn/no-useless-promise-resolve-reject": "off",
                "unicorn/no-useless-spread": "off",
                "unicorn/no-zero-fractions": "off",
                "unicorn/number-literal-case": "off",
                "unicorn/numeric-separators-style": "off",
                "unicorn/prefer-blob-reading-methods": "off",
                "unicorn/prefer-dom-node-remove": "off",
                "unicorn/prefer-dom-node-text-content": "off",
                "unicorn/prefer-export-from": "off",
                "unicorn/prefer-global-this": "off",
                "unicorn/prefer-json-parse-buffer": "off",
                "unicorn/prefer-keyboard-event-key": "off",
                "unicorn/prefer-math-min-max": "off",
                "unicorn/prefer-single-call": "off",
                "unicorn/prefer-structured-clone": "off",
                "unicorn/relative-url-style": "off",
                "unicorn/require-array-join-separator": "off",
                "unicorn/require-number-to-fixed-digits-argument": "off",
                "unicorn/switch-case-braces": "off",
                "unicorn/template-indent": "off",
                "unicorn/text-encoding-identifier-case": "off",

                // Additional unicorn rules that might still cause conflicts
                "unicorn/prefer-dom-node-dataset": "off",
                "unicorn/prefer-dom-node-append": "off",
                "unicorn/prevent-abbreviations": "off",

                // **Override Standard Rules with CoffeeScript Versions (from original config)**
                "no-unused-vars": "off",
                "coffee/no-unused-vars": "error",
                "no-undef": "error",
                "coffee/no-unreachable": "error",
                "coffee/no-constant-condition": "error",
                "coffee/no-cond-assign": "error",
                "coffee/no-empty-character-class": "error",
                "coffee/no-extra-boolean-cast": "error",
                "coffee/no-inner-declarations": "error",
                "coffee/no-regex-spaces": "error",
                "coffee/no-unsafe-negation": "error",
                "coffee/use-isnan": "error",
                "coffee/valid-typeof": "error",

                // **Additional ESLint Rules: Possible Errors**
                "no-async-promise-executor": "error",
                "no-await-in-loop": "error",
                "no-compare-neg-zero": "error",
                "no-console": "warn", // Set to warn for browser debugging flexibility
                "no-control-regex": "error",
                "no-duplicate-case": "error",
                "no-empty": "error",
                "no-ex-assign": "error",
                "no-invalid-regexp": "error",
                "no-irregular-whitespace": "error",
                "no-misleading-character-class": "error",
                "no-obj-calls": "error",
                "no-prototype-builtins": "error",
                "no-sparse-arrays": "error",
                "no-unsafe-finally": "error",
                "require-atomic-updates": "error",

                // **Additional ESLint Rules: Best Practices**
                "default-case": "error",
                "max-classes-per-file": ["error", 1],
                "no-alert": "error",
                "no-caller": "error",
                "no-empty-pattern": "error",
                "no-eval": "error",
                "no-extend-native": "error",
                "no-floating-decimal": "error",
                "no-global-assign": "error",
                "no-implied-eval": "error",
                "no-iterator": "error",
                "no-new": "error",
                "no-new-func": "error",
                "no-new-wrappers": "error",
                "no-param-reassign": "error",
                "no-proto": "error",
                "no-restricted-properties": "error",
                "no-script-url": "error",
                "no-self-assign": "error",
                "no-self-compare": "error",
                "no-throw-literal": "error",
                "no-useless-call": "error",
                "no-useless-catch": "error",
                "no-useless-concat": "error",
                "no-warning-comments": "error",
                "prefer-promise-reject-errors": "error",
                "require-unicode-regexp": "error",
                "no-restricted-globals": "error",

                // CoffeeScript versions of rules where available
                "coffee/block-scoped-var": "error",
                "coffee/class-methods-use-this": "error",
                "coffee/dot-location": ["error", "property"],
                "coffee/dot-notation": "error",
                "coffee/guard-for-in": "error",
                "coffee/no-div-regex": "error",
                "coffee/no-else-return": "error",
                "coffee/no-extra-bind": "error",
                "coffee/no-implicit-coercion": "error",
                "coffee/no-loop-func": "error",
                "coffee/no-magic-numbers": ["error", { ignore: [0, 1] }],
                "coffee/no-multi-spaces": "error",
                "coffee/no-return-assign": "error",
                "coffee/no-sequences": "error",
                "coffee/no-unmodified-loop-condition": "error",
                "coffee/no-unused-expressions": "error",
                "coffee/no-useless-escape": "error",
                "coffee/no-useless-return": "error",
                "coffee/vars-on-top": "error",
                "coffee/yoda": "error",
                "coffee/no-shadow": "error",
                "coffee/no-use-before-define": "error",

                // **Additional ESLint Rules: Stylistic Issues**
                "computed-property-spacing": ["error", "never"],
                "jsx-quotes": ["error", "prefer-double"],
                "key-spacing": [
                    "error",
                    { beforeColon: false, afterColon: true },
                ],
                "linebreak-style": ["error", "unix"],
                "max-lines": ["error", 1000],
                "max-nested-callbacks": ["error", 3],
                "max-params": ["error", 5],
                "max-statements": ["error", 10],
                "new-cap": "error",
                "new-parens": "error",
                "no-array-constructor": "error",
                "no-bitwise": "error",
                "no-continue": "error",
                "no-inline-comments": "error",
                "no-multi-assign": "error",
                "no-new-object": "error",
                "no-restricted-syntax": "error",
                "no-tabs": "error",
                "no-trailing-spaces": "error",
                "quote-props": ["error", "as-needed"],
                "sort-keys": "error",
                "space-in-parens": ["error", "never"],
                "unicode-bom": "error",

                // CoffeeScript versions of stylistic rules where available
                "coffee/array-bracket-newline": ["error", "consistent"],
                "coffee/array-element-newline": ["error", "consistent"],
                "coffee/capitalized-comments": "error",
                "coffee/comma-style": ["error", "last"],
                "coffee/consistent-this": ["error", "that"],
                "coffee/lines-around-comment": "error",
                "coffee/lines-between-class-members": "error",
                "coffee/max-depth": ["error", 4],
                "coffee/max-lines-per-function": ["error", 50],
                "coffee/multiline-comment-style": "error",
                "coffee/newline-per-chained-call": "error",
                "coffee/no-lonely-if": "error",
                "coffee/no-mixed-operators": "error",
                "coffee/no-multiple-empty-lines": ["error", { max: 2 }],
                "coffee/no-negated-condition": "error",
                "coffee/no-underscore-dangle": "error",
                "coffee/no-unneeded-ternary": "error",
                "coffee/no-whitespace-before-property": "error",
                "coffee/object-property-newline": "error",
                "coffee/operator-assignment": "error",
                "coffee/operator-linebreak": ["error", "after"],
                "coffee/prefer-object-spread": "error",
                "coffee/wrap-regex": "error",

                // **Additional ESLint Rules: ECMAScript 6**
                "constructor-super": "error",
                "no-class-assign": "error",
                "no-dupe-class-members": "error",
                "no-duplicate-imports": "error",
                "no-new-symbol": "error",
                "no-restricted-imports": "error",
                "no-this-before-super": "error",
                "no-useless-computed-key": "error",
                "no-useless-constructor": "error",
                "no-useless-rename": "error",
                "prefer-numeric-literals": "error",
                "prefer-rest-params": "error",
                "prefer-spread": "error",
                "symbol-description": "error",

                // CoffeeScript versions of ES6 rules where available
                "coffee/arrow-spacing": "error",
                "coffee/no-class-assign": "error",
                "coffee/no-this-before-super": "error",
                "coffee/no-useless-computed-key": "error",
                "coffee/no-useless-constructor": "error",
                "coffee/prefer-destructuring": "error",
                "coffee/prefer-template": "error",
                "coffee/rest-spread-spacing": ["error", "never"],
                "coffee/template-curly-spacing": ["error", "never"],
            },
        },
        // Jest test configuration (unchanged)
        {
            files: ["test/javascript/**/*.js", "test/javascript/**/*.coffee"],
            plugins: ["jest"],
            env: {
                jest: true,
                browser: true,
                node: true,
            },
            parserOptions: {
                ecmaVersion: 2021,
                sourceType: "module",
            },
            extends: ["plugin:jest/recommended"],
        },
    ],
};
